<!DOCTYPE html>
<html>
    <title>Welcome to Mmeds</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://127.0.0.1:52953/CSS/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.5.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/7e4e0c6c2d.js" crossorigin="anonymous"></script>
    <style>
html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
    </style>
    <body class="w3-light-grey">
        <!-- Top container -->
        <div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
            <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
            <span class="w3-bar-item w3-right">
                <img src="files/Mount_Sinai_Logo.png" alt="Mount Sinai Logo" style="height:30px">
            </span>
        </div>

        <!-- Sidebar/menu -->
        <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
            <div class="w3-container w3-row">
                <div class="w3-col s4">
                    <img src="files/MMeds_Logo.png"
                         class="w3-rectangle"
                         style="width:265px"
                         alt="MMEDs Logo" >
                </div>
            </div>
            <div class="w3-container w3-row w3-center">
                <div class="w3-bar">
                    <span>Welcome, <strong>David</strong></span> <br>
                    <a href="Homepage.html" class="w3-bar-item w3-button"><i class="fa fa-home"></i></a>
                    <a href="Account.html" class="w3-bar-item w3-button"><i class="fa fa-user"></i></a>
                    <a href="#" class="w3-bar-item w3-button"><i class="fa fa-cog"></i></a>
                </div>
            </div>
            <hr>
            <div class="w3-container">
                <h5>Dashboard</h5>
            </div>
            <div class="w3-bar-block">
                <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>
                <a href="Upload.html" class="w3-bar-item w3-button w3-padding"><i class="fas fa-upload fa-fw"></i>  Upload</a>
                <a href="Analyze.html" class="w3-bar-item w3-button w3-padding"><i class="fas fa-chart-bar fa-fw"></i>  Analyze</a>
                <a href="Access.html" class="w3-bar-item w3-button w3-padding w3-blue"><i class="fas fa-dna fa-fw"></i>  Studies</a>
                <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-search fa-fw"></i>  Query</a>
                <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fas fa-sign-out-alt fa-fw"></i>  Logout</a><br><br>
            </div>
        </nav>
        <!-- Overlay effect when opening sidebar on small screens -->
        <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

        <!-- !PAGE CONTENT! -->
        <div class="w3-main" style="margin-left:300px;margin-top:43px;">

            <!-- Header -->
            <header class="w3-container" style="padding-top:22px">
                <h5><b><i class="fas fa-server"></i> ACTIVATE</b></h5>
            </header>

            <div class='w3-container'>
                <h2> Study Information </h2>
                <table class="w3-table-all w3-card-4 w3-hoverable">
                <tr><th> Study Name</th><th> matt_study </th></tr>
                <tr><th> Created</th><th> 2020-03-04 14:48:48.382000 </th></tr>
                <tr><th> Last Accessed</th><th> 2020-03-04 14:57:57.307000 </th></tr>
                <tr><th> Study Type</th><th> study </th></tr>
                <tr><th> Reads Type</th><th> single_end </th></tr>
                <tr><th> Barcodes Type</th><th> single_barcodes </th></tr>
                <tr><th> Access Code</th><th> plxhnikfxpvqqmbyhpsaiskzzuakhghedxjilpdoidllcgpafp </th></tr>
                <tr><th> Owner</th><th> mstrpylton </th></tr>
                <tr><th> Email</th><th> mkstrpylton@gmail.com</th></tr>
                <tr><th> Patr</th><th> /sc/orga/projects/MMEDS/mmeds_server_datr/mstrpylton_matt_study_0 </th></tr>
                </table>
            </div>
            <hr>

            <div class='w3-container w3-grey'>
                <h2> Study Options </h2>
                <div class="w3-bar w3-card-4 w3-dark-grey">
                    <button onclick="openStudyAction(event, 'SelectAnalysis')" class="action-link w3-quarter w3-button">
                        <i class="fa fa-eye w3-xxxlarge"></i>
                        <div class="w3-clear"></div>
                        <h4>View Analyses</h4>
                    </button>
                    <button onclick="openStudyAction(event, 'ModifyUpload')" class="action-link w3-quarter w3-button">
                        <i class="fa fa-redo w3-xxxlarge"></i>
                        <div class="w3-clear"></div>
                        <h4>Modify Study</h4>
                    </button>
                    <button onclick="openStudyAction(event, 'GenerateID')" class="action-link w3-quarter w3-button">
                        <i class="fa fa-clipboard-check w3-xxxlarge"></i>
                        <div class="w3-clear"></div>
                        <h4>Generate ID</h4>
                    </button>
                    <button onclick="openStudyAction(event, 'DownloadFiles')" class="action-link w3-quarter w3-button">
                        <i class="fa fa-cloud-download w3-xxxlarge"></i>
                        <div class="w3-clear"></div>
                        <h4>Download Files</h4>
                    </button>
                </div>

                <hr>

                <!-- Sections of the page that only appear upon selection -->
                <div id="SelectAnalysis" class="study-action w3-container w3-row-padding w3-margin-bottom" style="display:none">
                    <h2> Related Analyses </h2>
                    <form action='Analysis.html' method='post' enctype='multipart/form-data' id='analysis_form'>
                        <select class="w3-select w3-border" name='access_code' form='analysis_form'>
                            <option value="wbiazdwsbhgkzrjriesg">Qiime2_0</option>
                            <option value="mngcjmvaiqypreewkjve">Qiime1_0</option>
                        </select>
                        <button class="w3-btn w3-border" type='submit' method='post'>Select Analysis</button>
                    </form>
                </div>
                <div id="ModifyUpload" class="study-action w3-container w3-row-padding w3-margin-bottom" style="display:none">
                    <h2> File to Modify </h2>
                    <form action='#' method='post' enctype='multipart/form-data' id='study_form'>
                        <select class="w3-select w3-border" name='file_path' form='study_form'>
                            <option value="full_metadata.tsv">metadata</option>
                            <option value="barcodes.fastq.gz">barcodes</option>
                            <option value="forward_reads.fastq.gz">for_reads</option>
                        </select>
                        <p>
                        <label class> <b>New File</b> </label>
                        <input class="w3-input" type='file' placeholder="Default Config" name='config'/>
                        </p>

                        <button class="w3-button w3-border" type='submit' method='post'>Modify Upload</button>
                    </form>
                </div>
                <div id="GenerateID" class="study-action w3-container w3-row-padding w3-margin-bottom" style="display:none">
                    <h2> Generate ID </h2>
                    <select class="w3-select w3-border" id='specimen'>
                        <option value=1 selected='selected'> Specimen 1 </option>
                        <option value=2> Specimen 2 </option>
                        <option value=3> Specimen 3 </option>
                    </select>
                    <button onclick="generate_ID()" class="w3-btn w3-border" >Generate ID</button>
                    <br>
                    <div id="IDcontainer" class="w3-container w3-card-2 w3-padding-16" style="display:none">
                        <table class="w3-table-all ">
                            <thead>
                                <tr class="w3-light-grey">
                                    <th>New Aliquot ID</th>
                                </tr>
                            </thead>
                            <tr>
                                <th id="newID"></th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="DownloadFiles" class="study-action w3-container w3-row-padding w3-margin-bottom" style="display:none">
                    <h2> File to Download </h2>
                    <form action='#' method='post' enctype='multipart/form-data' id='study_form'>
                        <select class="w3-select w3-border" name='file_path' form='study_form'>
                            <option value="/sc/orga/projects/MMEDS/mmeds_server_data/mstapylton_matt_study_0/full_metadata.tsv">metadata</option>
                            <option value="/sc/orga/projects/MMEDS/mmeds_server_data/mstapylton_matt_study_0/barcodes.fastq.gz">barcodes</option>
                            <option value="/sc/orga/projects/MMEDS/mmeds_server_data/mstapylton_matt_study_0/forward_reads.fastq.gz">for_reads</option>
                        </select>
                        <button class="w3-btn w3-border" type='submit' method='post'>Download File</button>
                    </form>
                </div>
            </div>

            <!-- Footer -->
            <footer class="w3-container w3-padding-16 w3-light-grey">
                <p>
                <h4> Copyright Clemente Lab 2018-2020</h4>
                Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
                </p>
            </footer>

            <!-- End page content -->
        </div>

        <script>

            // Get the Sidebar
            var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
    if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
        overlayBg.style.display = "none";
    } else {
        mySidebar.style.display = 'block';
        overlayBg.style.display = "block";
    }
}

// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
    overlayBg.style.display = "none";
}

function openStudyAction(evt, cityName) {
    var i, x, tablinks;
    var x = document.getElementsByClassName("study-action");
    for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
    }
    document.getElementById(cityName).style.display = "block";
    tablinks = document.getElementsByClassName("action-link");
    for (i = 0; i < x.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" w3-blue", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " w3-blue";
}

var button = document.getElementById("newID");
var container = document.getElementById("IDcontainer");
let count = [0, 0, 0];
function generate_ID() {
    var specimen = document.getElementById("specimen").value;
    count[specimen] += 1;
    button.innerHTML = "Specimen_" + specimen + "_" + count[specimen];
    container.style.display = "block";
};

        </script>

    </body>
</html>
